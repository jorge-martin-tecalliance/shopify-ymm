<div id="ymm-widget">
  
  <div class="widget-header-wrapper">
    <div class="widget-header">Let us help you find what you need!</div>
    <div class="widget-subheader">Please select your vehicles year, make, and model from the dropdowns.</div>
  </div>

  <div class="row">

    <div class="ymm-search">

      <div class="ymm-box">
        <select id="year-select" onchange="loadYearChange();">
          <option value="">Select Year *</option>
        </select>
      </div>

      <div class="ymm-box">
        <select id="make-select" onchange="loadMakeChange();">
          <option value="">Select Make *</option>
        </select>
      </div>

      <div class="ymm-box">
        <select id="model-select" onchange="loadModelChange();">
          <option value="">Select Model *</option>
        </select>
      </div>

      <div class="ymm-box">
        <button type="button" class="ymm-search-btn" id="search-button" onclick="searchParts()">Search</button>
      </div>

    </div>

    <div class="v-line"></div>

    <div class="location-type">

      <div class="ymm-box">
        <select id="region-select" onchange="loadRegionChange();">
          <option value="">Select Region *</option>
        </select>
      </div>

      <div class="ymm-box">
        <select id="type-select" onchange="loadTypeChange();">
          <option value="">Select Vehicle Type *</option>
        </select>
      </div>

    </div>

  </div>

</div>

{{ 'ymm-widget.css' | asset_url | stylesheet_tag }}

<script>
  window.OPTICAT_CONFIG = {
    apiUrl: 'https://webservice.opticatonline.com/autocare/v1/services/Catalog.jsonEndpoint',
    apiKey: '2BeBXg6FtqihLXMGmWdc2DQYRLozzH6MQ3owHfWNhBz4Qb47WR3y'
  };
  window.searchResultsPageUrl = {{ block.settings.results_page_url | json }};
</script>

<script src="{{ 'ymm-widget.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "Year Make Model Widget",
  "target": "section",
  "settings": [
    {
      "type": "text",
      "id": "results_page_url",
      "label": "Search Results redirect URL",
      "info": "URL of the page containing the search results block (e.g., /search). Leave empty if results block is on same page.",
      "default": "/search"
    }
  ]
}
{% endschema %}
